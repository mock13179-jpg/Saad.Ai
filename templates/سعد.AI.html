<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>سعد.AI - الذكاء الاصطناعي المتطور</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* أنماط عالمية بتصميم فاخر بالأسود */
    :root {
      --primary-black: #000000;
      --dark-charcoal: #121212;
      --graphite: #1a1a1a;
      --carbon: #222222;
      --light-charcoal: #2d2d2d;
      --platinum: #e0e0e0;
      --silver: #f0f0f0;
      --neon-blue: #4895ef;
      --electric-purple: #a855f7;
      --font-primary: 'Tajawal', 'Segoe UI', sans-serif;
      --gold-accent: #ffd700;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      transition: all 0.3s ease;
    }

    body {
      font-family: var(--font-primary);
      background: linear-gradient(135deg, var(--primary-black) 0%, var(--dark-charcoal) 100%);
      color: var(--silver);
      line-height: 1.8;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 10% 20%, rgba(72, 149, 239, 0.05) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(168, 85, 247, 0.05) 0%, transparent 20%);
      pointer-events: none;
      z-index: -1;
    }

    /* تصميم متطور للحاوية الرئيسية */
    .app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      max-width: 1400px;
      margin: 0 auto;
      background: rgba(18, 18, 18, 0.9);
      box-shadow: 
        0 0 50px rgba(0, 0, 0, 0.8),
        0 0 100px rgba(72, 149, 239, 0.1);
      border-left: 1px solid rgba(72, 149, 239, 0.1);
      border-right: 1px solid rgba(72, 149, 239, 0.1);
      position: relative;
      overflow: hidden;
    }

    /* شريط العنوان الفاخر */
    .app-header {
      background: linear-gradient(90deg, var(--primary-black) 0%, var(--graphite) 100%);
      color: var(--silver);
      padding: 1.5rem 3rem;
      text-align: center;
      border-bottom: 3px solid var(--neon-blue);
      position: relative;
      overflow: hidden;
      z-index: 2;
    }

    .app-header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--neon-blue), var(--electric-purple));
      animation: headerGlow 3s infinite alternate;
    }

    @keyframes headerGlow {
      0% { opacity: 0.3; }
      100% { opacity: 1; }
    }

    /* تصميم الشعار */
    .logo-main {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin-bottom: 1rem;
      position: relative;
      z-index: 3;
    }

    .main-logo {
      width: 140px;
      height: 140px;
      object-fit: contain;
      border-radius: 50%;
      background: linear-gradient(145deg, var(--graphite), var(--primary-black));
      padding: 15px;
      box-shadow: 
        0 0 20px rgba(72, 149, 239, 0.3),
        0 0 40px rgba(72, 149, 239, 0.1);
      border: 2px solid var(--neon-blue);
      transition: transform 0.5s ease;
    }

    .main-logo:hover {
      transform: rotate(10deg) scale(1.05);
    }

    .logo-main h1 {
      font-size: 3rem;
      font-weight: 800;
      background: linear-gradient(90deg, var(--neon-blue), var(--electric-purple));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px rgba(72, 149, 239, 0.5);
      letter-spacing: 1px;
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      margin-top: 0.5rem;
      color: var(--platinum);
      max-width: 600px;
      margin: 10px auto;
      line-height: 1.6;
    }

    /* منطقة الدردشة المتطورة */
    .chat-container {
      display: flex;
      flex-direction: column;
      flex: 1;
      padding: 2rem;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="none" stroke="%23333" stroke-width="0.5"/></svg>');
      background-size: 30px 30px;
      position: relative;
    }

    .chat-history {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      border-radius: 16px;
      background: rgba(26, 26, 26, 0.7);
      border: 1px solid rgba(72, 149, 239, 0.2);
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .welcome-message {
      text-align: center;
      padding: 1.5rem;
      color: var(--neon-blue);
      font-weight: 600;
      font-size: 1.3rem;
      background: rgba(26, 26, 26, 0.6);
      border-radius: 12px;
      border: 1px solid rgba(72, 149, 239, 0.3);
      margin-bottom: 20px;
    }

    /* رسائل حديثة بتصميم عصري */
    .message {
      margin-bottom: 1rem;
      padding: 1.5rem;
      border-radius: 18px;
      max-width: 85%;
      position: relative;
      animation: fadeIn 0.4s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      line-height: 1.7;
      font-size: 1.1rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .user-message {
      background: linear-gradient(135deg, var(--light-charcoal) 0%, var(--carbon) 100%);
      color: var(--silver);
      margin-left: auto;
      border-bottom-right-radius: 5px;
      border-left: 3px solid var(--neon-blue);
    }

    .bot-message {
      background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(34, 34, 34, 0.8) 100%);
      color: var(--platinum);
      margin-right: auto;
      border-bottom-left-radius: 5px;
      border-right: 3px solid var(--electric-purple);
    }

    .message p {
      margin-bottom: 10px;
    }

    .message-time {
      font-size: 0.8rem;
      opacity: 0.7;
      display: block;
      margin-top: 0.8rem;
      color: var(--platinum);
      text-align: left;
    }

    /* منطقة الإدخال بتصميم فاخر */
    .input-area {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    textarea {
      width: 100%;
      padding: 1.2rem 1.5rem;
      border: 2px solid rgba(72, 149, 239, 0.3);
      border-radius: 14px;
      resize: none;
      font-family: var(--font-primary);
      font-size: 1.1rem;
      background: rgba(26, 26, 26, 0.7);
      color: var(--silver);
      backdrop-filter: blur(5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      min-height: 120px;
    }

    textarea:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 0 3px rgba(72, 149, 239, 0.3), 0 0 20px rgba(72, 149, 239, 0.2);
    }

    textarea::placeholder {
      color: #777;
    }

    /* مجموعة الأزرار بتصميم عصري */
    .button-group {
      display: flex;
      gap: 1.2rem;
      justify-content: flex-end;
    }

    button {
      padding: 0.9rem 1.8rem;
      border: none;
      border-radius: 12px;
      font-family: var(--font-primary);
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, var(--light-charcoal) 0%, var(--carbon) 100%);
      color: var(--silver);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    button::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: translateX(-100%);
    }

    button:hover::before {
      animation: shine 1.5s infinite;
    }

    @keyframes shine {
      100% { transform: translateX(100%); }
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    button:active {
      transform: translateY(1px);
    }

    .primary-btn {
      background: linear-gradient(135deg, var(--neon-blue) 0%, var(--electric-purple) 100%);
      color: white;
      border: 1px solid rgba(72, 149, 239, 0.5);
    }

    .primary-btn:hover {
      background: linear-gradient(135deg, #3a7bd5 0%, #8a2be2 100%);
      box-shadow: 0 0 20px rgba(72, 149, 239, 0.4);
    }

    .secondary-btn {
      background: linear-gradient(135deg, var(--graphite) 0%, var(--light-charcoal) 100%);
      color: var(--platinum);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .secondary-btn:hover {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      border-color: rgba(72, 149, 239, 0.3);
    }

    /* التذييل بتصميم عصري */
    .app-footer {
      text-align: center;
      padding: 1.2rem;
      background: linear-gradient(90deg, var(--primary-black) 0%, var(--graphite) 100%);
      color: var(--platinum);
      font-size: 0.95rem;
      border-top: 1px solid rgba(72, 149, 239, 0.2);
    }

    /* نقاط التحميل */
    .loading-dots {
      display: flex;
      justify-content: center;
      padding: 15px;
    }

    .loading-dots span {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--neon-blue);
      margin: 0 5px;
      animation: bounce 1.4s infinite ease-in-out both;
    }

    .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
    .loading-dots span:nth-child(2) { animation-delay: -0.16s; }

    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }

    /* تأثيرات متقدمة للشاشة */
    .particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      background: var(--neon-blue);
      border-radius: 50%;
      opacity: 0.2;
      animation: float 15s infinite linear;
    }

    @keyframes float {
      0% { transform: translateY(0) translateX(0); opacity: 0; }
      10% { opacity: 0.2; }
      100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
    }

    /* التصميم المتجاوب */
    @media (max-width: 768px) {
      .app-container {
        max-width: 100%;
      }
      
      .app-header {
        padding: 1rem;
      }
      
      .logo-main h1 {
        font-size: 2.2rem;
      }
      
      .main-logo {
        width: 100px;
        height: 100px;
      }
      
      .chat-container {
        padding: 1rem;
      }
      
      .message {
        max-width: 90%;
        padding: 1rem;
      }
      
      .button-group {
        flex-direction: column;
      }
      
      button {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <!-- جسيمات متحركة للخلفية -->
  <div class="particles" id="particles"></div>
  
  <div class="app-container">
    <div class="app-header">
      <div class="logo-main">
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='none' stroke='%234895ef' stroke-width='3'/><path d='M30,30 L50,70 L70,30' fill='none' stroke='%234895ef' stroke-width='3' stroke-linecap='round'/><circle cx='50' cy='40' r='5' fill='%234895ef'/></svg>" alt="Saad.AI Logo" class="main-logo">
        <h1>سعد.AI</h1>
      </div>
      <div class="subtitle">نظام ذكاء اصطناعي متطور ذاتي التعلم والتكيف، صمم خصيصاً لتقديم حلول ذكية وإبداعية في كل المجالات</div>
    </div>

    <div class="chat-container">
      <div class="chat-history" id="chatHistory">
        <div class="welcome-message">
          <p>مرحباً! أنا سعد.AI، رفيقك الذكي في العالم الرقمي. كيف يمكنني مساعدتك اليوم؟</p>
        </div>
      </div>

      <div class="input-area">
        <textarea id="userInput" placeholder="اكتب رسالتك هنا..."></textarea>
        <div class="button-group">
          <button id="sendButton" class="primary-btn"><i class="fas fa-paper-plane"></i> إرسال</button>
          <button id="clearButton" class="secondary-btn"><i class="fas fa-trash-alt"></i> مسح المحادثة</button>
          <button id="copyButton" class="secondary-btn"><i class="fas fa-copy"></i> نسخ الرد الأخير</button>
        </div>
      </div>
    </div>

    <div class="app-footer">
      <p>الإصدار الخارق (Ultimate Edition) &copy; 2025 - جميع الحقوق محفوظة</p>
    </div>
  </div>
  
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // الحصول على العناصر
    const userInput = document.getElementById('userInput');
    const sendButton = document.getElementById('sendButton');
    const clearButton = document.getElementById('clearButton');
    const copyButton = document.getElementById('copyButton');
    const chatHistory = document.getElementById('chatHistory');
    
    // إنشاء جسيمات الخلفية
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 30;

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        const size = Math.random() * 5 + 1;
        const posX = Math.random() * 100;
        const duration = Math.random() * 20 + 10;
        const delay = Math.random() * 5;
        const color = `hsl(${Math.random() * 360}, 70%, 60%)`;

        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}%`;
        particle.style.background = color;
        particle.style.animationDuration = `${duration}s`;
        particle.style.animationDelay = `${delay}s`;

        particlesContainer.appendChild(particle);
      }
    }
    
    // تهيئة الجسيمات
    createParticles();
    
    // إرسال بالضغط على إنتر
    userInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    
    // حدث إرسال الرسالة
    sendButton.addEventListener('click', sendMessage);
    
    // مسح المحادثة
    clearButton.addEventListener('click', function() {
      chatHistory.innerHTML = `
        <div class="welcome-message">
          <p>مرحباً! أنا سعد.AI، رفيقك الذكي في العالم الرقمي. كيف يمكنني مساعدتك اليوم؟</p>
        </div>
      `;
      clearButton.classList.add('animate');
      setTimeout(() => clearButton.classList.remove('animate'), 500);
    });
    
    // نسخ الرد الأخير
    copyButton.addEventListener('click', function() {
      const botMessages = document.querySelectorAll('.bot-message');
      if (botMessages.length > 0) {
        const lastBotMessage = botMessages[botMessages.length - 1];
        const textToCopy = lastBotMessage.textContent.trim();
        
        navigator.clipboard.writeText(textToCopy)
          .then(() => {
            copyButton.innerHTML = `<i class="fas fa-check"></i> تم النسخ!`;
            copyButton.style.background = 'linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)';
            setTimeout(() => {
              copyButton.innerHTML = `<i class="fas fa-copy"></i> نسخ الرد الأخير`;
              copyButton.style.background = '';
            }, 2000);
          })
          .catch(err => {
            console.error('Failed to copy: ', err);
          });
      } else {
        copyButton.innerHTML = `<i class="fas fa-exclamation-triangle"></i> لا يوجد رد!`;
        setTimeout(() => {
          copyButton.innerHTML = `<i class="fas fa-copy"></i> نسخ الرد الأخير`;
        }, 2000);
      }
    });
    
    // إرسال رسالة للخادم
    async function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;
      
      addMessage(message, 'user');
      userInput.value = '';
      
      const loadingId = showLoading();
      
      try {
        const response = await fetch('/api/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            "رسالة": message,
            "معرف_المستخدم": 'default_user'
          })
        });
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        
        if (data.رد) {
          addMessage(data.رد, 'bot');
        } else if (data.responses) {
          const responses = [
            `[تقني] ${data.responses.technical || 'لا يوجد رد تقني'}`,
            `[عملي] ${data.responses.practical || 'لا يوجد رد عملي'}`,
            `[إبداعي] ${data.responses.creative || 'لا يوجد رد إبداعي'}`
          ];
          responses.forEach(response => addMessage(response, 'bot'));
        } else {
          addMessage('تلقيت ردًا غير متوقع من الخادم', 'bot');
        }
      } catch (error) {
        console.error('Error:', error);
        addMessage(`حدث خطأ: ${error.message}`, 'bot');
      } finally {
        removeLoading(loadingId);
      }
    }
    
    // إضافة رسالة للشاشة
    function addMessage(text, sender) {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message', `${sender}-message`);
      const now = new Date();
      const timeString = now.toLocaleTimeString('ar-EG', {
        hour: '2-digit',
        minute: '2-digit'
      });
      messageDiv.innerHTML = `
        <p>${text}</p>
        <span class="message-time">${timeString}</span>
      `;
      chatHistory.appendChild(messageDiv);
      chatHistory.scrollTop = chatHistory.scrollHeight;
      
      // تأثير الظهور
      messageDiv.style.transform = 'scale(0.9)';
      messageDiv.style.opacity = '0';
      setTimeout(() => {
        messageDiv.style.transform = 'scale(1)';
        messageDiv.style.opacity = '1';
      }, 10);
    }
    
    // عرض مؤشر التحميل
    function showLoading() {
      const loadingId = 'loading-' + Date.now();
      const loadingDiv = document.createElement('div');
      loadingDiv.id = loadingId;
      loadingDiv.classList.add('message', 'bot-message');
      loadingDiv.innerHTML = `
        <div class="loading-dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      `;
      chatHistory.appendChild(loadingDiv);
      chatHistory.scrollTop = chatHistory.scrollHeight;
      return loadingId;
    }
    
    // إزالة مؤشر التحميل
    function removeLoading(id) {
      const loadingElement = document.getElementById(id);
      if (loadingElement) {
        loadingElement.style.opacity = '0';
        setTimeout(() => {
          if (loadingElement.parentNode) {
            loadingElement.parentNode.removeChild(loadingElement);
          }
        }, 300);
      }
    }
  });
  </script>
</body>
</html>